<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>views.py</title>
  <link rel="stylesheet" href="..\pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>views.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">redirect</span>
<span class="kn">from</span> <span class="nn">django.core.files.storage</span> <span class="kn">import</span> <span class="n">FileSystemStorage</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span><span class="p">,</span> <span class="n">JsonResponse</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">reverse</span><span class="p">,</span> <span class="n">resolve</span>
<span class="kn">from</span> <span class="nn">django.views.decorators.csrf</span> <span class="kn">import</span> <span class="n">csrf_exempt</span>
<span class="kn">from</span> <span class="nn">.library</span> <span class="kn">import</span> <span class="n">hackingtools</span> <span class="k">as</span> <span class="n">ht</span>
<span class="kn">from</span> <span class="nn">.library.hackingtools.core</span> <span class="kn">import</span> <span class="n">Utils</span><span class="p">,</span> <span class="n">Logger</span><span class="p">,</span> <span class="n">Config</span><span class="p">,</span> <span class="n">Connections</span><span class="p">,</span> <span class="n">UtilsDjangoViewsAuto</span>
<span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="nb">reload</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">requests</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">colorama</span> <span class="kn">import</span> <span class="n">Fore</span>

<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">from</span> <span class="nn">.views_modules</span> <span class="kn">import</span> <span class="o">*</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>Create your views here.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">getConfig</span><span class="p">(</span><span class="n">parentKey</span><span class="o">=</span><span class="s1">&#39;django&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s1">&#39;views&#39;</span><span class="p">)</span>

<span class="k">global</span> <span class="n">ht_data</span>
<span class="n">ht_data</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">global</span> <span class="n">ht_data_maps</span>
<span class="n">ht_data_maps</span> <span class="o">=</span> <span class="p">{}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">load_data</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">ht_data</span>
    <span class="n">modules_and_params</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">getModulesJSON</span><span class="p">()</span>
    <span class="n">modules_forms</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">DjangoFunctions</span><span class="o">.</span><span class="n">__getModulesDjangoForms__</span><span class="p">()</span>
    <span class="n">modules_forms_modal</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">DjangoFunctions</span><span class="o">.</span><span class="n">__getModulesDjangoFormsModal__</span><span class="p">()</span>
    <span class="n">modules_config</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">getModulesConfig</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>! Slows down a lot the charge of Django home view
modules_config_treeview = ht.DjangoFunctions.<strong>getModulesConfig_treeView</strong>()</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">modules_config_treeview</span> <span class="o">=</span> <span class="p">{}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>TODO </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">modules_functions_modals</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">DjangoFunctions</span><span class="o">.</span><span class="n">getModulesModalTests</span><span class="p">()</span>
    <span class="n">modules_functions_calls_console_string</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">DjangoFunctions</span><span class="o">.</span><span class="n">getModulesFunctionsCalls</span><span class="p">()</span>
    <span class="n">modules_all</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">modules_and_params</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">mod</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>
            <span class="n">categories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">modules_all</span><span class="p">[</span><span class="n">mod</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">modules_and_params</span><span class="p">[</span><span class="n">mod</span><span class="p">]</span>
    <span class="n">modules_names</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">getModulesNames</span><span class="p">()</span>
    <span class="n">server_repo</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Repositories</span><span class="o">.</span><span class="n">getOnlineServers</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">modules_names_repo</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">categories_names_repo</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">server_repo</span><span class="p">:</span>
        <span class="n">modules_names_repo</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ht_{m}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">mod</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;ht_&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span> <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">ht</span><span class="o">.</span><span class="n">Repositories</span><span class="o">.</span><span class="n">getModules</span><span class="p">(</span><span class="n">server_repo</span><span class="p">)]</span>
        <span class="n">categories_names_repo</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Repositories</span><span class="o">.</span><span class="n">getCategories</span><span class="p">(</span><span class="n">server_repo</span><span class="p">)</span>
    <span class="n">pool_list</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">getPoolNodes</span><span class="p">()</span>
    <span class="n">my_services</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">getMyServices</span><span class="p">()</span>
    <span class="n">ngrokService</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">getNgrokServiceUrl</span><span class="p">()</span>
    <span class="n">is_heroku</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="s1">&#39;DYNO&#39;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">my_node_id_pool</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">MY_NODE_ID</span>
    <span class="n">status_pool</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">WANT_TO_BE_IN_POOL</span>
    <span class="n">ht_data</span> <span class="o">=</span>  <span class="p">{</span> 
        <span class="s1">&#39;modules&#39;</span><span class="p">:</span><span class="n">modules_names</span><span class="p">,</span> 
        <span class="s1">&#39;modules_names_repo&#39;</span><span class="p">:</span><span class="n">modules_names_repo</span><span class="p">,</span>
        <span class="s1">&#39;categories_names_repo&#39;</span><span class="p">:</span><span class="n">categories_names_repo</span><span class="p">,</span>
        <span class="s1">&#39;categories&#39;</span><span class="p">:</span><span class="n">categories</span><span class="p">,</span> 
        <span class="s1">&#39;modules_all&#39;</span><span class="p">:</span><span class="n">modules_all</span><span class="p">,</span>
        <span class="s1">&#39;modules_forms&#39;</span><span class="p">:</span><span class="n">modules_forms</span><span class="p">,</span> 
        <span class="s1">&#39;modules_forms_modal&#39;</span><span class="p">:</span><span class="n">modules_forms_modal</span><span class="p">,</span> 
        <span class="s1">&#39;modules_config&#39;</span><span class="p">:</span><span class="n">modules_config</span><span class="p">,</span> 
        <span class="s1">&#39;console_command&#39;</span><span class="p">:</span><span class="n">modules_functions_calls_console_string</span><span class="p">,</span> 
        <span class="s1">&#39;modules_config_treeview&#39;</span><span class="p">:</span><span class="n">modules_config_treeview</span><span class="p">,</span> 
        <span class="s1">&#39;modules_functions_modals&#39;</span><span class="p">:</span><span class="n">modules_functions_modals</span><span class="p">,</span> 
        <span class="s1">&#39;pool_list&#39;</span><span class="p">:</span><span class="n">pool_list</span><span class="p">,</span>
        <span class="s1">&#39;my_services&#39;</span><span class="p">:</span><span class="n">my_services</span><span class="p">,</span>
        <span class="s1">&#39;is_heroku&#39;</span><span class="p">:</span><span class="n">is_heroku</span><span class="p">,</span>
        <span class="s1">&#39;ngrokService&#39;</span><span class="p">:</span><span class="n">ngrokService</span><span class="p">,</span>
        <span class="s1">&#39;my_node_id_pool&#39;</span><span class="p">:</span><span class="n">my_node_id_pool</span><span class="p">,</span>
        <span class="s1">&#39;status_pool&#39;</span><span class="p">:</span><span class="n">status_pool</span><span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">load_data_maps</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">ht_data_maps</span>
    <span class="k">if</span> <span class="n">ht_data_maps</span><span class="p">:</span>
        <span class="n">ht_data_maps</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">ht_data_maps</span><span class="p">[</span><span class="s1">&#39;gps&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Utils</span><span class="o">.</span><span class="n">getLocationGPS</span><span class="p">()</span>
    <span class="n">ht_data_maps</span><span class="p">[</span><span class="s1">&#39;funcs_map&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">DjangoFunctions</span><span class="o">.</span><span class="n">getModulesFunctionsForMap</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">ht_data</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ht_data</span><span class="p">:</span>
        <span class="n">load_data</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">popup_text</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">ht_data</span><span class="p">[</span><span class="s1">&#39;popup_text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">popup_text</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;core/index.html&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">ht_data</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">renderMaps</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">ht_data_maps</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ht_data_maps</span><span class="p">:</span>
        <span class="n">load_data_maps</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;core/maps.html&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">ht_data_maps</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">switchFunctionMap</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module&#39;</span><span class="p">)</span>
    <span class="n">cat</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">getModuleCategory</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span>
    <span class="n">fun</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;functionName&#39;</span><span class="p">)</span>
    <span class="n">ht</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">switch_function_for_map</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">fun</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">({</span><span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="s1">&#39;Ok&#39;</span><span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">ht_data</span>
    <span class="n">load_data</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">popup_text</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">ht_data</span><span class="p">[</span><span class="s1">&#39;popup_text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">popup_text</span>
    <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">documentation</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">module_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="n">this_conf</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;documentation&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">module_name</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">ht</span><span class="o">.</span><span class="n">modules_loaded</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">module_name</span> <span class="o">==</span> <span class="n">mod</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">doc_mod</span> <span class="o">=</span> <span class="s1">&#39;{documents_dir}/{c}/{b}/{a}.html&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">documents_dir</span><span class="o">=</span><span class="n">this_conf</span><span class="p">[</span><span class="s1">&#39;documents_dir&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="n">mod</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span><span class="n">module_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;ht_&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">a</span><span class="o">=</span><span class="n">module_name</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="n">doc_mod</span><span class="p">)</span>
                <span class="n">categories</span> <span class="o">=</span> <span class="p">[]</span> 
                <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">ht</span><span class="o">.</span><span class="n">getModulesJSON</span><span class="p">():</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">mod</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>
                        <span class="n">categories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">modules_names</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">getModulesNames</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">this_conf</span><span class="p">[</span><span class="s1">&#39;html_template&#39;</span><span class="p">],</span> <span class="p">{</span> <span class="s1">&#39;doc_mod&#39;</span> <span class="p">:</span> <span class="n">doc_mod</span><span class="p">,</span> <span class="s1">&#39;categories&#39;</span> <span class="p">:</span> <span class="n">categories</span><span class="p">,</span> <span class="s1">&#39;modules&#39;</span> <span class="p">:</span> <span class="n">modules_names</span> <span class="p">})</span>
        <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="n">this_conf</span><span class="p">[</span><span class="s1">&#39;bad_module&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="n">this_conf</span><span class="p">[</span><span class="s1">&#39;no_module_selected&#39;</span><span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">sendPool</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">functionName</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>! changes here affect all nodes on the network, so should be careful with this
! It loop inside all nodes&rsquo;s known nodes</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">ht</span><span class="o">.</span><span class="n">wantPool</span><span class="p">():</span>
        <span class="n">response</span><span class="p">,</span> <span class="n">creator</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">functionName</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">creator</span> <span class="o">==</span> <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">MY_NODE_ID</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;nodes_pool&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;nodes_pool&#39;</span><span class="p">]:</span>
                        <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">addNodeToPool</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;res&#39;</span><span class="p">],</span> <span class="bp">False</span> <span class="c1"># Yes, mine</span>
            <span class="k">return</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;res&#39;</span><span class="p">],</span> <span class="bp">True</span> <span class="c1"># Repool, not mine</span>
    <span class="k">return</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">switchPool</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">ht</span><span class="o">.</span><span class="n">switchPool</span><span class="p">()</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;status&#39;</span> <span class="p">:</span> <span class="n">ht</span><span class="o">.</span><span class="n">wantPool</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">createModule</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">mod_name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module_name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">mod_cat</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;category_name&#39;</span><span class="p">)</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">createModule</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">mod_cat</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">created</span><span class="p">:</span>
        <span class="n">modules_and_params</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">getModulesJSON</span><span class="p">()</span>
        <span class="n">load_data</span><span class="p">()</span>
        <span class="n">UtilsDjangoViewsAuto</span><span class="o">.</span><span class="n">loadModuleFunctionsToView</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">mod_cat</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>! Tengo que hacer que llame a las funciones de crear views y json con la config&hellip;
! Aprovechar para solucionar los params que no cogia (es porque tira del inspect y como no est치 guardado en pypi esa versi칩n, no coge esa versi칩n y devuelve 0 params)
! Creo que se puede solucionar con la Util amIDjango al inicio de los import
* Hay que sacar las funciones de las urls.py que sirve para ello, a un UtilsDjango.py para ciertas funciones
! De esta forma, desde aqui, podemos llamar a esas funciones y cargar todo de una sola vez y avisar que las funciones
! solo ser치n funcionales una vez se reinicie o intentar hacer que se virtualice de alguna forma esa url y se resuelva sola sin tener que recargar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">removeModule</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">mod_name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module_name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">category</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">getModuleCategory</span><span class="p">(</span><span class="n">mod_name</span><span class="p">)</span>
        <span class="n">ht</span><span class="o">.</span><span class="n">removeModule</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
        <span class="n">UtilsDjangoViewsAuto</span><span class="o">.</span><span class="n">removeModuleView</span><span class="p">(</span><span class="n">mod_name</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="s1">&#39;Removed successfully&#39;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">downloadInstallModule</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">mod_name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module_name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;ht_&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">ht</span><span class="o">.</span><span class="n">Repositories</span><span class="o">.</span><span class="n">installModule</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">Repositories</span><span class="o">.</span><span class="n">getOnlineServers</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mod_name</span><span class="p">)</span>
        <span class="n">UtilsDjangoViewsAuto</span><span class="o">.</span><span class="n">restartDjangoServer</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="s1">&#39;Installed successfully&#39;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">restartServerDjango</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">UtilsDjangoViewsAuto</span><span class="o">.</span><span class="n">restartDjangoServer</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="s1">&#39;Reloading... Please wait at least 1 minute for saving changes&#39;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">configModule</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">mod_name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module_name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      <p>mod_conf = ht.getModuleConfig(mod_name)
reload(ht)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">createCategory</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">mod_cat</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;category_name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">ht</span><span class="o">.</span><span class="n">createCategory</span><span class="p">(</span><span class="n">mod_cat</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">createScript</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">config_look_for_changes</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">ht</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">__look_for_changes__</span><span class="p">()</span>
    <span class="n">load_data</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">saveFileOutput</span><span class="p">(</span><span class="n">myfile</span><span class="p">,</span> <span class="n">module_name</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="s2">&quot;library&quot;</span><span class="p">,</span> <span class="s2">&quot;hackingtools&quot;</span><span class="p">,</span> <span class="s2">&quot;modules&quot;</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">module_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;ht_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;output&quot;</span><span class="p">)</span>
    <span class="n">fs</span> <span class="o">=</span> <span class="n">FileSystemStorage</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">myfile</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">myfile</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">printMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;saveFileOutput&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">debug_core</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">printMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;saveFileOutput&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Saving to {fi}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fi</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">myfile</span><span class="o">.</span><span class="n">name</span><span class="p">)),</span> <span class="n">is_success</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">debug_core</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">filename</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">getLogs</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="n">ht</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">getLogsClear</span><span class="p">(),</span>
        <span class="s1">&#39;buttonsPool&#39;</span> <span class="p">:</span> <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">__checkPoolNodes__</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="nd">@csrf_exempt</span>
<span class="k">def</span> <span class="nf">add_pool_node</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">this_conf</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;add_pool_node&#39;</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">:</span>
            <span class="n">pool_node</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pool_ip&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pool_node</span> <span class="ow">or</span> <span class="n">pool_node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">getPoolNodes</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">pool_node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">getMyPublicIP</span><span class="p">(</span><span class="n">as_service</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span> <span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">getMyLocalIP</span><span class="p">(</span><span class="n">as_service</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span> <span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">getMyLanIP</span><span class="p">(</span><span class="n">as_service</span><span class="o">=</span><span class="bp">True</span><span class="p">)):</span>
                    <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">addNodeToPool</span><span class="p">(</span><span class="n">pool_node</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pooling&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">serv</span> <span class="ow">in</span> <span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">getMyServices</span><span class="p">():</span>
                            <span class="n">service_for_call</span> <span class="o">=</span> <span class="s1">&#39;{node_ip}/core/pool/add_pool_node/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">node_ip</span><span class="o">=</span><span class="n">pool_node</span><span class="p">)</span>
                            <span class="n">add_me_to_theis_pool</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">service_for_call</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pool_ip&#39;</span><span class="p">:</span><span class="n">serv</span><span class="p">},</span>  <span class="n">headers</span><span class="o">=</span><span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">add_me_to_theis_pool</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                                <span class="n">Logger</span><span class="o">.</span><span class="n">printMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;send&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Saving my service API REST to {n} - {s} &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">pool_node</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">serv</span><span class="p">),</span> <span class="n">is_info</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">debug_core</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="s1">&#39;Could not add my own service to my pool nodes&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">getPoolNodes</span><span class="p">()))</span>
        <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="s1">&#39;Only POST is available&#39;</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="n">this_conf</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">getPoolNodes</span><span class="p">()))</span>

<span class="k">def</span> <span class="nf">getDictionaryAlphabet</span><span class="p">(</span><span class="n">numeric</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">simbols14</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">simbolsAll</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;numeric&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lower</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;numeric&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;lalpha&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;ualpha&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;mixalpha&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lower</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">upper</span> <span class="ow">and</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;symbols14&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lower</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;symbols-all&#39;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">upper</span> <span class="ow">and</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;lalpha-symbol14&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;lalpha-all&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;lalpha-numeric&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">upper</span> <span class="ow">and</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;lalpha-numeric-symbol14&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;lalpha-numeric-all&#39;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;ualpha-symbol14&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;ualpha-all&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;ualpha-numeric&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;ualpha-numeric-symbol14&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;ualpha-numeric-all&#39;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;mixalpha-symbol14&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;mixalpha-all&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;mixalpha-numeric&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;mixalpha-numeric-symbol14&#39;</span>
    <span class="k">if</span> <span class="n">numeric</span> <span class="ow">and</span> <span class="n">lower</span> <span class="ow">and</span> <span class="n">upper</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">simbols14</span> <span class="ow">and</span> <span class="n">simbolsAll</span><span class="p">:</span>
        <span class="n">used_alphabet</span> <span class="o">=</span> <span class="s1">&#39;mixalpha-numeric-all&#39;</span>

    <span class="k">return</span> <span class="n">used_alphabet</span>

<span class="nd">@csrf_exempt</span>
<span class="k">def</span> <span class="nf">poolExecute</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">functionCall</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;functionCall&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

        <span class="n">creator</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;creator_id&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">creator</span> <span class="o">!=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">MY_NODE_ID</span><span class="p">:</span>

            <span class="n">files</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span>

            <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

            <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">__checkPoolNodes__</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">isHeroku</span><span class="p">():</span>
                <span class="n">me</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">getMyLocalIP</span><span class="p">(</span><span class="n">as_service</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">me</span> <span class="o">=</span> <span class="s1">&#39;http://{url}:{port}/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">Connections</span><span class="o">.</span><span class="n">getMyLocalIP</span><span class="p">(),</span> <span class="n">port</span><span class="o">=</span><span class="n">Connections</span><span class="o">.</span><span class="n">getActualPort</span><span class="p">())</span>

            <span class="k">if</span> <span class="n">functionCall</span><span class="p">:</span>
                <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:28.0) Gecko/20100101 Firefox/28.0&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json, text/javascript, */*; q=0.01&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded; charset=UTF-8&#39;</span>
                <span class="p">}</span>
                <span class="n">client</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">session</span><span class="p">()</span>
                <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">me</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
                <span class="n">csrftoken</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;csrfmiddlewaretoken&#39;</span><span class="p">})[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">printMessage</span><span class="p">(</span><span class="n">csrftoken</span><span class="p">,</span> <span class="n">is_info</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">debug_core</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;csrfmiddlewaretoken&#39;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;csrfmiddlewaretoken&#39;</span><span class="p">]</span>
                <span class="n">params</span><span class="p">[</span><span class="s1">&#39;csrfmiddlewaretoken&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">csrftoken</span>
                <span class="n">is_async</span> <span class="o">=</span> <span class="s1">&#39;is_async_{fu}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fu</span><span class="o">=</span><span class="n">functionCall</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
                <span class="n">params</span><span class="p">[</span><span class="n">is_async</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">call_url</span> <span class="o">=</span> <span class="s1">&#39;{me}{slash}{call}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">me</span><span class="o">=</span><span class="n">me</span><span class="p">,</span> <span class="n">slash</span><span class="o">=</span><span class="s1">&#39;/&#39;</span> <span class="k">if</span> <span class="n">me</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;/&#39;</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">call</span><span class="o">=</span><span class="n">functionCall</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="n">call_url</span><span class="p">)</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">call_url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">printMessage</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">is_info</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">debug_core</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">printMessage</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">is_info</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">debug_core</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">({</span><span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)[</span><span class="s1">&#39;data&#39;</span><span class="p">]})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">({</span><span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="s1">&#39;No function to call&#39;</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">({</span><span class="s1">&#39;fail&#39;</span> <span class="p">:</span> <span class="s1">&#39;My own call&#39;</span><span class="p">})</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">({</span><span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>

<span class="nd">@csrf_exempt</span>
<span class="k">def</span> <span class="nf">getNodeId</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">({</span> <span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">MY_NODE_ID</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>Connections</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">startNgrok</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">ngrok</span> <span class="o">=</span> <span class="n">ht</span><span class="o">.</span><span class="n">Connections</span><span class="o">.</span><span class="n">startNgrok</span><span class="p">(</span><span class="n">Connections</span><span class="o">.</span><span class="n">getActualPort</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">ngrok</span><span class="p">:</span>
        <span class="n">ht</span><span class="o">.</span><span class="n">Pool</span><span class="o">.</span><span class="n">callNodesForInformAboutMyServices</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="n">popup_text</span><span class="o">=</span><span class="n">ngrok</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">renderMainPanel</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
